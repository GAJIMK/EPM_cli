<template>
  <div id="container">
    <h2 class="name">📰 다트 익명 게시판 ✏️</h2>
    <label for="name" class="title_2">제목 🙌</label
    ><b-input
      class="title"
      type="text"
      placeholder="제목을 입력하세요"
      disabled
      v-model="this.title"
    />
    <small>{{ date }}</small>
    <label for="content"></label>
    <b-textarea
      class="content"
      name="content"
      id="content"
      cols="30"
      rows="10"
      placeholder="내용을 입력하세요"
      disabled
      v-model="this.content"
    ></b-textarea>
    <div class="footer">
      <div>{{ thumbs }}</div>
      <div class="icon-container yellowBtn">
        <font-awesome-icon
          icon="fa-solid fa-thumbs-up"
          class="icon"
          @click="putData()"
        />
      </div>
      <b-button class="yellowBtn" @click="goback()">목록</b-button>
    </div>
  </div>
</template>

<script>
import { fetchBoard } from '@/api/board/board';
import { putThumbs, fetchThumbsCnt } from '@/api/Thumbs/thumbs.js';

export default {
  components: {},
  data() {
    return {
      thumbsContent: {
        id: this.$route.query.id,
        accountId: 'jihye.son',
        //로그인 기능 되면 로그인 아이디가 들어갈 예정
      },

      title: '',
      content: '',
      date: '',
      thumbs: '',
    };
  },
  mounted() {
    this.loadData();
    this.loadThumbs();
  },
  methods: {
    async loadData() {
      const res = await fetchBoard(this.$route.query.id);
      this.title = res.data.list[0].title;
      this.content = res.data.list[0].content;
      this.date = res.data.list[0].date;
    },
    goback() {
      window.history.go(-1);
    },
    async putData() {
      try {
        await putThumbs(this.thumbsContent).then(() => {
          this.loadThumbs();
        });
      } catch (error) {
        this.errorMsg = getErrorResponseData(error);
        console.log('에러');
      }
    },
    async loadThumbs() {
      const res = await fetchThumbsCnt(this.thumbsContent.id);
      this.thumbs = res.data.list[0].cnt;
    },
  },
};
</script>

<style lang="scss">
@import '@/scss/main.scss';

.container {
  display: flex;
  flex-direction: column;
}
.title:disabled,
.content:disabled {
  background-color: aliceblue;
}
.icon-container {
  width: 3.5em;
  height: 3.5em;
  border-radius: 50%;
  background-color: var(--color-yellow);
  display: flex;
  align-items: center;
  justify-content: center;
  &:hover {
    -webkit-box-shadow: 0px 0px 14px 2px rgba(255, 200, 87, 0.26);
    box-shadow: 0px 0px 14px 2px rgba(255, 200, 87, 0.26);
    transform: scale(1.02);
    border: 3px solid var(--color-yellow);
    .icon {
      color: #fdc000;
    }
  }
  .icon {
    width: 1.5rem;
    height: 1.5rem;
    color: #fff;
    font-size: 10px;
  }
}
.footer {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-around;
  padding: 5%;
}
</style>
